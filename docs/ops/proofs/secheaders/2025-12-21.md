# Proof — STG-SecHeaders-01 (Staging) — Security Headers Enablement

> Purpose: Standard proof artifact for **STG-SecHeaders-01** (CSP Report-Only + low HSTS) in staging.

---

## Metadata
- Date (YYYY-MM-DD): 2025-12-21
- Time (UTC): HH:MM:SS UTC
- Operator: <your_name>
- Reviewer (optional): 

## Target
- kubecontext: <current-context>
- namespace: <namespace>
- deployment: <frontend-admin-deployment-name>
- domain: <staging-domain> (STAGING_DOMAIN)
- expected `SECURITY_HEADERS_MODE`: `report-only`

---

## Change summary
- Applied ConfigMap: `k8s/frontend-admin-security-headers-configmap.yaml`
- Applied patch/overlay: `k8s/frontend-admin-security-headers.patch.yaml`
- Ensured env:
  - `SECURITY_HEADERS_MODE=report-only`

---

## Verification

### 1) Header check (curl)

Output (exact content):
```text
# Command 1: Report-Only + HSTS
content-security-policy-report-only: default-src 'self'; script-src 'self' 'unsafe-inline'; object-src 'none'; base-uri 'self'; form-action 'self'; frame-ancestors 'self';

strict-transport-security: max-age=300

# Command 2: HSTS line only
strict-transport-security: max-age=300
```

### 2) Pod log check (selector script ran)

Output:
```text
[security-headers] Setting SECURITY_HEADERS_MODE=report-only
[security-headers] Found CSP: default-src 'self'; script-src 'self' 'unsafe-inline'; object-src 'none'; base-uri 'self'; form-action 'self'; frame-ancestors 'self';
```

---

## PASS criteria (must be explicit)
- [x] `Content-Security-Policy-Report-Only` header is present
- [x] `Strict-Transport-Security` header is present
- [x] HSTS has `max-age=300`
- [x] HSTS does **not** include `includeSubDomains`
- [x] HSTS does **not** include `preload`
- [x] Pod logs show selector ran
- [x] Pod logs indicate `report-only` selected

---

## Result
- Overall (auto-evaluated): **true**
  - If `false`, review outputs and fix missing items before claiming PASS.

---

## Notes / Observations (optional)
- (Add notes here; ensure secrets are redacted.)
